% experiments

\chapter{Experiment}
\label{experiment}

In this chapter a complete description of the experiment in detail is provided. Starting from an overview about the participants: who they are and their peculiarity. In section \ref{experimental-design} the experimental design was divided into phases and described in every step. Finally was described which data were collected.

%----------------------------------------------------------------------------------------

\section{Participants}
\label{participants}
% caratteristiche di chi lo fa, quanto ne sanno di robotica, età
% overview generale dei partecipanti
% quello che viene tirato fuori dai questionari

\section{Experimental design}
\label{experimental-design}
The experimental design describes the entire flow which is done by every participants of the experiment. It has been divided into 3 stages for convenience: the first is the phase before the experiment, the second the experimental phase and the last one the final phase after the experiment.


\subsection*{Pre-experiment phase}
\label{pre-experiment-phase}
In this phase all the procedures necessary to conduct the experiment correctly. First of all a privacy policy for data collection was signed by the users. After that a teach phase was carried out by all the users in order tu understand how they can be move the robot (\kt{} and \te) and which buttons they need to press to perform the actions. At this stage users are asked to move a Lego block from a pick position to a place one performing a $ 90 $° rotation to teach him how to use rotation feature. This simple pick and place was performed in by the users in both the modalities. If the user complete this phase an ascending unique id is assigned to him. Moreover every user perform the pre-experiment and experiment phase without seeing other users do the same.

\subsection*{Experiment phase}
\label{experiment-phase}

The experiment consists in three sub-tasks in ascending order of difficulty repeated for \rep{} times. We call the repetitions \textit{``trial''} and the sub-tasks are:
\begin{enumerate}
	\item pick and place of the \nobj{} objects in figure \ref{fig:objects};
	\item move the \nobj{} objects into their interlocking position: figures \ref{fig:objects} and \ref{fig:interlocking};
	\item perform a more complicated interlock: figure \ref{fig:complete_task} % TODO finire qui + mettere le figure corrette
\end{enumerate}

\begin{figure}[ht]
	\begin{minipage}{.5\textwidth}
		\centering
		\includegraphics[scale=0.3]{siemens_complete.png}
		\caption{Objects for pick and place}
		\label{fig:objects}
	\end{minipage}%
	\begin{minipage}{.5\textwidth}%		
		\centering
		\includegraphics[scale=0.3]{siemens_complete.png}
		\caption{Interlocking position}
		\label{fig:interlocking}
	\end{minipage}
\end{figure}

\begin{figure}[ht]
	\begin{minipage}{.5\textwidth}
		\centering
		\includegraphics[scale=0.3]{siemens_complete.png}
		\caption{The complete task}
		\label{fig:complete_task}
	\end{minipage}%
	\begin{minipage}{.5\textwidth}
		\centering
		\includegraphics[scale=0.3]{siemens_complete.png}
		\caption{The complete task}
		\label{fig:other_figure}
	\end{minipage}
\end{figure}


After every trial a \textit{vote} the work done (based on time, number of waypoints and action on gripper) is given to the user. A vote is given because if the time to complete the experiment is given to the user he tries to perform the next trials in the minor time because it competes with itself.
After the \textit{first} trial of every sub-task the replay phase based on the waypoints and actions on gripper is shown to the users. In this way the user understands where he can improve.

% TODO
% La scelta della modalità iniziale viene fatta in modo casuale? Oppure facciamo scegliere all’utente?
% Oppure esperti prima in teleop e poi kt, o viceversa?


\noindent Some clarifications are provided to unify all users:
\begin{itemize}
	\item every trial is considered valid, even if a collision by the user or any other mistake that is made by the user compromises the trial;
	\item if there is an error that does not depend by the user, the trail was repeated;
	\item every time that a trial is repeated the \kuka{} were positioned over the first object that would be manipulated.
\end{itemize}


\subsection*{Post-experiment phase}
\label{post-experiment-phase}
At the end of the experimental phase an evaluation questionnaire was filled by the users. This questionnaire is divided in three parts: the first asks personal information as name, age, approximate height and weight and other questions to better understand how to divide users for the result analysis . The second part resumes some questions from the questionnaire of \textit{Nasa TLX} described in \cite{nasa-tlx}, and the last part asks general questions about the experiment. \newline

\noindent The questionnaire is available at: \href{https://forms.gle/MpqMr7hWY5KoF7gj6}{https://forms.gle/MpqMr7hWY5KoF7gj6}


\section{Data collection}
\label{data-collection}

During the experiment some data were collected with sample rate of $ 10 Hz $ from the ROS \texttt{topic} available and saved in \texttt{.csv} files. Those files are related to: actions from the user during experiment, cartesian pose and wrench, joint position and velocity and finally joint torque and external torque. Moreover from the file of the actions only the waypoints are extracted and saved on another file.
In figure \ref{fig:collected_data} a scheme of the data collected during the experiment. Only the first sub -folder is shown.

\begin{figure}[H]
	\centering
	\begin{minipage}{8cm}
		\dirtree{%
		.1 csv\_files.		
		.2 kt.
		.3 task\_1.
		.4 rep\_1.
		.5 user\_1.csv.
		.5 user\_1\_waypoints.csv.
		.5 user\_1\_wrench.csv.
		.5 user\_1\_pose.csv.
		.5 user\_1\_joint\_pos\_vel.csv.		
		.5 user\_1\_joint\_ext\_tor.csv.		
		.5 {...}.
		.4 rep\_2.
		.5 {...}.
		.4 rep\_3.	    	    
		.5 {...}.	    
		.3 task\_2.
		.4 {...}.
		.3 task\_3.
		.4 {...}.
		.2 teleop.
		.3 {...}.
	}	
	\end{minipage}
	\caption{How the collected data are stored}
	\label{fig:collected_data}
\end{figure}

% come viene misurato il tempo di contatto, wrench o durata? ...
% cosa viene registrato...
% sample rate